{"version":3,"sources":["webpack:///webpack/bootstrap 1511e35af67e470f5d39","webpack:///external \"Injector\"","webpack:///./client/src/components/SSButtonField.js","webpack:///./client/src/state/SSButtonActionTypes.js","webpack:///external \"React\"","webpack:///external \"Redux\"","webpack:///./client/src/boot/index.js","webpack:///./client/src/components/SSButtonEntwine.js","webpack:///./client/src/boot/registerComponents.js","webpack:///./client/src/boot/registerReducers.js","webpack:///./client/src/bundles/bundle.js","webpack:///./client/src/state/SSButtonActions.js","webpack:///./client/src/state/SSButtonDataStructure.js","webpack:///./client/src/state/SSButtonReducer.js","webpack:///external \"DeepFreezeStrict\"","webpack:///external \"FieldHolder\"","webpack:///external \"ReactApollo\"","webpack:///external \"ReactDom\"","webpack:///external \"ReactRedux\"","webpack:///external \"SilverStripeComponent\"","webpack:///external \"i18n\"","webpack:///external \"jQuery\"","webpack:///external \"reduxFieldReducer\"","webpack:///external \"schemaFieldValues\""],"names":["ssButtonActions","SSButtonField","props","handleItemClick","bind","state","marcz","console","log","actions","nextProps","event","preventDefault","ssbutton","fireClick","values","propTypes","extraClass","PropTypes","string","id","isRequired","disabled","bool","mapStateToProps","ownprops","fields","securityId","config","SecurityID","mapDispatchToProps","dispatch","ConnectedSSButtonField","CLICK_COUNT","document","addEventListener","InjectableSSButtonField","entwine","$","onunmatch","_super","unmountComponentAtNode","onmatch","refresh","store","window","ss","client","apolloClient","getAttributes","form","closest","onChange","setTimeout","trigger","render","parent","data","schema","registerComponents","component","register","registerReducers","reducer","ssButton","require","currentData","type","payload","dataStructure","count","initialState","initialFieldState","ssButtonReducer","action","reduceField","field","Object","assign"],"mappings":"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","file":"js/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1511e35af67e470f5d39","module.exports = Injector;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Injector\"\n// module id = 0\n// module chunks = 0","import i18n from 'i18n';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport SilverStripeComponent from 'lib/SilverStripeComponent';\nimport fieldHolder from 'components/FieldHolder/FieldHolder';\nimport * as ssButtonActions from '../state/SSButtonActions';\n\nclass SSButtonField extends SilverStripeComponent {\n\n  constructor(props) {\n    super(props);\n\n    this.handleItemClick = this.handleItemClick.bind(this);\n\n    this.state = {\n      marcz: 'hermo',\n    };\n  }\n\n  componentDidMount() {\n    // Copy form schema data into redux and then ignore it\n    console.log(['componentDidMount', this.props.actions]);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    // Propegate redux state changes to redux-from value for this field\n    console.log(['componentWillReceiveProps', this.props, nextProps]);\n  }\n\n  /**\n   * Handles click of an item\n   *\n   * @param {Object} event\n   */\n  handleItemClick(event) {\n    event.preventDefault();\n    console.log(['handleItemClick', this.props]);\n    this.props.actions.ssbutton.fireClick(this.props.values);\n  }\n\n  render() {\n    return (\n      <div className=\"ssButtonfield\">\n        <button onClick={this.handleItemClick}>0</button>\n      </div>\n    );\n  }\n}\n\nSSButtonField.propTypes = {\n  extraClass: React.PropTypes.string,\n  id: React.PropTypes.string.isRequired,\n  disabled: React.PropTypes.bool,\n};\n\nfunction mapStateToProps(state, ownprops) {\n  const id = ownprops.id;\n  let values = [];\n  if (state.ssbutton\n    && state.ssbutton\n    && state.ssbutton.fields\n    && state.ssbutton.fields[id]\n  ) {\n    values = state.ssbutton.fields[id].values || [];\n  }\n  const securityId = state.config.SecurityID;\n  return { values, securityId };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: {\n      ssbutton: bindActionCreators(ssButtonActions, dispatch),\n    },\n  };\n}\n\nconst ConnectedSSButtonField = connect(mapStateToProps, mapDispatchToProps)(SSButtonField);\n\nexport { SSButtonField, ConnectedSSButtonField };\n\nexport default fieldHolder(ConnectedSSButtonField);\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/components/SSButtonField.js","export default {\n  CLICK_COUNT: 'CLICK_COUNT',\n};\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/state/SSButtonActionTypes.js","module.exports = React;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 3\n// module chunks = 0","module.exports = Redux;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"Redux\"\n// module id = 4\n// module chunks = 0","import registerReducers from './registerReducers';\nimport registerComponents from './registerComponents';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  registerComponents();\n  registerReducers();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/boot/index.js","import jQuery from 'jquery';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ApolloProvider } from 'react-apollo';\nimport { schemaMerge } from 'lib/schemaFieldValues';\nimport { ConnectedSSButtonField } from './SSButtonField';\nimport { provideInjector } from 'lib/Injector';\n\nconst InjectableSSButtonField = provideInjector(ConnectedSSButtonField);\n\n/**\n * Shiv for inserting react Field into entwine forms\n */\njQuery.entwine('ss', ($) => {\n  /**\n   * See boot/index.js for `.react-boot` bootstrap\n   */\n  $('.entwine-ss-button').entwine({\n\n    onunmatch() {\n      this._super();\n      // solves errors given by ReactDOM \"no matched root found\" error.\n      ReactDOM.unmountComponentAtNode(this[0]);\n    },\n\n    onmatch() {\n      this._super();\n      this.refresh();\n    },\n\n    refresh() {\n      const store = window.ss.store;\n      const client = window.ss.apolloClient;\n      const props = this.getAttributes();\n      const form = $(this).closest('form');\n      const onChange = () => {\n        // Trigger change detection (see jquery.changetracker.js)\n        setTimeout(() => {\n          form.trigger('change');\n        }, 0);\n      };\n\n      ReactDOM.render(\n        <ApolloProvider store={store} client={client}>\n          <InjectableSSButtonField {...props} onChange={onChange} />\n        </ApolloProvider>,\n        this.parent()[0]\n      );\n    },\n\n    /**\n     * Find the selected node and get attributes associated to attach the data to the form\n     *\n     * @returns {Object}\n     */\n    getAttributes() {\n      const state = $(this).data('state');\n      const schema = $(this).data('schema');\n      return schemaMerge(schema, state);\n    },\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/components/SSButtonEntwine.js","import Injector from 'lib/Injector';\nimport SSButtonField from '../components/SSButtonField';\n\nconst registerComponents = () => {\n  Injector.component.register('SSButtonField', SSButtonField);\n};\n\nexport default registerComponents;\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/boot/registerComponents.js","import Injector from 'lib/Injector';\nimport { combineReducers } from 'redux';\nimport ssButtonReducer from '../state/SSButtonReducer';\n\nconst registerReducers = () => {\n  Injector.reducer.register('ssButton', combineReducers({\n    ssButton: ssButtonReducer,\n  }));\n};\n\nexport default registerReducers;\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/boot/registerReducers.js","require('../boot/index');\nrequire('../components/SSButtonEntwine.js');\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/bundles/bundle.js","import ACTION_TYPES from './SSButtonActionTypes';\n\nexport function fireClick(currentData) {\n  return (dispatch) =>\n    dispatch({\n      type: ACTION_TYPES.CLICK_COUNT,\n      payload: { currentData },\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/state/SSButtonActions.js","import deepFreeze from 'deep-freeze-strict';\n\n/**\n * Default empty structure for a file\n */\nconst dataStructure = deepFreeze({\n  id: 0,\n  count: 0,\n});\n\nexport default dataStructure;\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/state/SSButtonDataStructure.js","import ACTION_TYPES from './SSButtonActionTypes';\nimport dataStructure from './SSButtonDataStructure';\nimport getFieldReducer from 'lib/reduxFieldReducer';\n\n/**\n * Initial base state\n * @type {{fields: {}}}\n */\nconst initialState = {\n  fields: {},\n};\n\n/**\n * Default object for an empty field state\n * @type {{files: Array}}\n */\nconst initialFieldState = { values: [] };\n\nfunction ssButtonReducer(state = initialState, action) {\n  // Get field reducer\n  const reduceField = getFieldReducer(state, action, initialFieldState);\n\n  // Update state for this field\n  switch (action.type) {\n    case ACTION_TYPES.CLICK_COUNT:\n      return reduceField((field) => ({\n        values: [\n          ...(field.values),\n          Object.assign({}, dataStructure, action.payload.currentData),\n        ],\n      }));\n\n    default:\n      return state;\n  }\n}\n\nexport default ssButtonReducer;\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/state/SSButtonReducer.js","module.exports = DeepFreezeStrict;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"DeepFreezeStrict\"\n// module id = 13\n// module chunks = 0","module.exports = FieldHolder;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"FieldHolder\"\n// module id = 14\n// module chunks = 0","module.exports = ReactApollo;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactApollo\"\n// module id = 15\n// module chunks = 0","module.exports = ReactDom;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactDom\"\n// module id = 16\n// module chunks = 0","module.exports = ReactRedux;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactRedux\"\n// module id = 17\n// module chunks = 0","module.exports = SilverStripeComponent;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"SilverStripeComponent\"\n// module id = 18\n// module chunks = 0","module.exports = i18n;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"i18n\"\n// module id = 19\n// module chunks = 0","module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 20\n// module chunks = 0","module.exports = reduxFieldReducer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"reduxFieldReducer\"\n// module id = 21\n// module chunks = 0","module.exports = schemaFieldValues;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"schemaFieldValues\"\n// module id = 22\n// module chunks = 0"],"sourceRoot":""}